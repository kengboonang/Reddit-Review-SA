<html lang="en">
    <head>
        <title>Review Scraping Results</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>

    <body>
        
        <h1>Scraped Reviews and Sentiments</h1>
        <a href="/">Review Something else</a>
        <canvas id="sentimentChart" width="400" height="200"></canvas>
        <h2>Summary</h2>
        <table border="1">
        <tbody>
            <tr>
            <th>Positive Reviews</th>
            <td id="pos_count">{{ pos_count }}</td>
            </tr>
            <tr>
            <th>Negative Reviews</th>
            <td id="neg_count">{{ neg_count }}</td>
            </tr>
        </tbody>
        </table>

        <table border="1">
            <tr>
                <th>Review</th>
                <th>Sentiment</th>
            </tr>
            {% for review, sentiment in reviews %}
            <tr>
                <td>{{ review }}</td>
                <td>{{ sentiment }}</td>
            </tr>
            {% endfor %}
        </table>
        <a href="/">Review something else</a>
        <script>
            var ctx = document.getElementById('sentimentChart').getContext('2d');
            var pos_count = document.getElementById('pos_count').innerText;
            var neg_count = document.getElementById('neg_count').innerText;
            var sentimentChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Positive', 'Negative'],
                    datasets: [{
                        label: 'Sentiment Distribution',
                        data: [pos_count, neg_count],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(255, 99, 132, 0.2)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
            })
        </script>
    </body>
</html>